<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video Engagement Dashboard</title>

    <link rel="stylesheet" href="static/dash.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Added improvements */
        .right .summary-section,
        .right .summary-box {
            margin-top: 25px; /* Creates the gap you requested */
        }

        /* Improve the right dashboard card spacing and look */
        .dash-card {
            padding: 25px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(8px);
            box-shadow: 0 4px 18px rgba(0,0,0,0.25);
        }

        .summary-section h3,
        .summary-box h3 {
            margin-bottom: 10px;
        }

        .analysis-content p,
        .summary-box p {
            line-height: 1.6;
        }

        /* Improve right layout spacing */
        .right {
            padding-left: 20px;
        }
    </style>
</head>

<body>

<header class="header">
    <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" class="logo" alt="YouTube Logo">
    <h1>Video Comment Insights</h1>
</header>

<main class="container">

    <section class="left">
        <div class="card">
            <h2>Sentiment Distribution</h2>
            <div class="chart-wrapper">
                <canvas id="sentimentChart"></canvas>
            </div>
        </div>
    </section>

    <section class="right">
        <div class="card dash-card">
            <h2>Video Details & Analysis</h2>

            <p class="video-link"><strong>Link:</strong> <a href='{{link}}' target="_blank">{{link}}</a></p>

            <p class="total-comments"><strong>Total Comments Analyzed:</strong>{{ total }}</p>

            <div class="summary-section positive">
                <h3>üëç Key Positive Themes</h3>
                <div class="analysis-content">
                    <p>{{positive_summary}}</p>
                </div>
            </div>

            <div class="summary-section negative">
                <h3>üëé Key Negative Themes</h3>
                <div class="analysis-content">
                    <p>{{negative_summary}}</p>
                </div>
            </div>

            <div class="summary-box overall">
                <h3>üìä Overall Analysis Summary</h3>
                <p>{{overall_summary}}</p>
            </div>

        </div>
    </section>

</main>

<script>
    const pos = {{ positive_pct }};
const neg = {{ negative_pct }};
const neu = {{ neutral_pct }};


new Chart(document.getElementById("sentimentChart"), {
    type: 'pie',
    data: {
        labels: ["Positive", "Negative", "Neutral"],
        datasets: [{
            data: [pos, neg, neu],
            backgroundColor: [
                "rgba(40, 167, 69, 0.9)",
                "rgba(220, 53, 69, 0.9)",
                "rgba(255, 193, 7, 0.9)"
            ],
            hoverOffset: 20,
            borderColor: "#111",
            borderWidth: 2
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: {
            animateScale: true,
            animateRotate: true,
            duration: 1800,
            easing: "easeOutBounce"
        },
        plugins: {
            legend: {
                position: "bottom",
                labels: {
                    font: { size: 14 },
                    padding: 15,
                    color: "#fff"
                }
            }
        }
    }
});
</script>
<script>
window.onload = function () {
    // Prevent back button from showing the dash page again
    history.replaceState(null, "", "/");
};
</script>


</body>
</html>